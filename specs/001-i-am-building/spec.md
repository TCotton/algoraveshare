# Feature Specification: [FEATURE NAME]

**Feature Branch**: `[###-feature-name]`  
**Created**: [DATE]  
**Status**: Draft  
**Input**: User description: "$ARGUMENTS"

## Execution Flow (main)
```markdown
# Feature Specification: Algorave Share ‚Äî public app for TidalCycles/Strudel shares

**Feature Branch**: `001-i-am-building`  
**Created**: 2025-10-02  
**Status**: Draft  
**Input**: User description: "I am building an app that users to enter code used by TidalCycles and Strudel. It will also allow the user to upload audio files as either MP3 or WAV formats that have been generated by either TidalCycles or Strudel. Visually it will look like a mock CLI theme, in particular the 'theme-catppuccin' with the '@webtui' package. It will also have an events sections where users can post up forthcoming live music coding events. It will have an 'about' page and a contact page. It will have a registration and login page. The page structures will be based on the user id or the project or snipped id. The data will be mocked and based on the schema specified in '/sql/001_init_schema_with_software_snippets.sql'. The home page will have a logo that reads 'Algorave Share' and will list in date order the latest projects added by users. This list will be two thirds of the width with the one third column for the live events. There will be a footer with dummy links. There will be a an admin area for registered users with CRUD capabilities. The dynamic pages will be one of three different type - user id, projects id and snippets id (See attachments above for file contents.)"

## Execution Flow (main)
```
1. Parse user description from Input
   ‚Üí If empty: ERROR "No feature description provided"
2. Extract key concepts from description
   ‚Üí Identify: actors, actions, data, constraints
3. For each unclear aspect:
   ‚Üí Mark with [NEEDS CLARIFICATION: specific question]
4. Fill User Scenarios & Testing section
   ‚Üí If no clear user flow: ERROR "Cannot determine user scenarios"
5. Generate Functional Requirements
   ‚Üí Each requirement must be testable
   ‚Üí Mark ambiguous requirements
6. Identify Key Entities (if data involved)
7. Run Review Checklist
   ‚Üí If any [NEEDS CLARIFICATION]: WARN "Spec has uncertainties"
   ‚Üí If implementation details found: ERROR "Remove tech details"
8. Return: SUCCESS (spec ready for planning)
```

---

## ‚ö° Quick Guidelines
- ‚úÖ Focus on WHAT users need and WHY
- ‚ùå Avoid HOW to implement (no tech stack, APIs, code structure)
- üë• Written for business stakeholders, not developers

### Section Requirements
- **Mandatory sections**: Must be completed for every feature
- **Optional sections**: Include only when relevant to the feature
- When a section doesn't apply, remove it entirely (don't leave as "N/A")

### For AI Generation
When creating this spec from a user prompt:
1. **Mark all ambiguities**: Use [NEEDS CLARIFICATION: specific question] for any assumption you'd need to make
2. **Don't guess**: If the prompt doesn't specify something (e.g., "login system" without auth method), mark it
3. **Think like a tester**: Every vague requirement should fail the "testable and unambiguous" checklist item
4. **Common underspecified areas**:
   - User types and permissions
   - Data retention/deletion policies  
   - Performance targets and scale
   - Error handling behaviors
   - Integration requirements
   - Security/compliance needs

---

## User Scenarios & Testing *(mandatory)*

### Primary User Story
- As a user, I can create an account, log in, and publish projects or code snippets for TidalCycles and Strudel; I can upload associated audio (MP3/WAV) generated by those tools; other users can browse recent projects and view event listings. Admin users can manage content (CRUD) through an admin area.

### Acceptance Scenarios
1. **Given** an unauthenticated visitor, **When** they visit the home page, **Then** they see the 'Algorave Share' logo and a two-column layout with the latest projects (left, two-thirds) and upcoming events (right, one-third).
2. **Given** an unauthenticated visitor, **When** they open a project page, **Then** they see the project's code, metadata, and any uploaded audio with a download/play option (MP3/WAV).
3. **Given** a registered user, **When** they create a new project or snippet, **Then** the item is added to the listing and visible on the home page in date order.
4. **Given** an admin user, **When** they open the admin area, **Then** they can create/read/update/delete projects, snippets, events and users.
5. **Given** a user uses the search or direct URL, **When** they navigate to a dynamic route (user id / project id / snippet id), **Then** the page renders mocked data according to the SQL schema.

### Edge Cases
- Upload of an unsupported audio format: system must reject and show an error.
- Large file uploads: the UI should reject files over the configured limit and show a clear message. [NEEDS CLARIFICATION: file size limit?]
- Two users attempt to edit the same project concurrently: last-write-wins or conflict resolution? [NEEDS CLARIFICATION]

## Requirements *(mandatory)*

### Functional Requirements
- **FR-001**: System MUST allow users to register and log in (create account and authenticate).
- **FR-002**: System MUST allow authenticated users to create, edit and delete projects and snippets (CRUD).
- **FR-003**: System MUST allow users to upload audio files in MP3 or WAV format when creating/updating a project or snippet.
- **FR-004**: System MUST display a home page with a two-column layout where the left column (2/3 width) lists latest projects in reverse chronological order and the right column (1/3 width) lists upcoming events.
- **FR-005**: System MUST render dynamic pages for user id, project id and snippet id using mocked data conforming to `/sql/001_init_schema_with_software_snippets.sql`.
- **FR-006**: System MUST provide an events section where users can post forthcoming live music coding events with title, date/time, location and description.
- **FR-007**: System MUST provide an 'about' page and a contact page with a simple contact form (sends email or mocked success). [NEEDS CLARIFICATION: actual email sending vs mocked?]
- **FR-008**: System MUST include an admin area (accessible to registered admin users) providing CRUD over users, projects, snippets and events.
- **FR-009**: System MUST present a mock CLI theme across the app (visual), using a catppuccin-like palette and a terminal-like UI style.
- **FR-010**: System MUST show a footer with dummy links on all pages.
- **FR-011**: System MUST validate uploaded files for MIME type and extension and reject non-MP3/WAV files.
- **FR-012**: System MUST store uploaded file metadata (filename, size, mime, original generator: TidalCycles/Strudel if provided) in the mocked data store according to the schema.

*Ambiguities / Questions (must be clarified before implementation):*
- **A1**: Authentication method ‚Äî email/password vs OAuth vs SSO? [NEEDS CLARIFICATION]
- **A2**: File storage backend ‚Äî local filesystem, S3, or mocked only? (For this spec we will use mocked storage.) [NEEDS CLARIFICATION if the user expects actual storage]
- **A3**: Max upload size and allowable bitrate/resolution limits? [NEEDS CLARIFICATION]
- **A4**: Exact fields/shape of events and projects beyond the provided SQL schema? The schema will be used, but confirm any extra metadata needed. [NEEDS CLARIFICATION]
- **A5**: Admin roles and permissions granularity? [NEEDS CLARIFICATION]
- **A6**: Should audio playback be implemented with an HTML5 player or a custom audio widget? [NEEDS CLARIFICATION]

### Key Entities *(include if feature involves data)*
- **User**: represents a registered person. Key attributes: id, username, displayName, email, passwordHash (if implemented), role (admin/user), createdAt.
- **Project**: a top-level share item. Key attributes (from schema): id, ownerUserId, title, description, code (text), language (TidalCycles | Strudel), createdAt, updatedAt, associated audio file references.
- **Snippet**: a smaller code share possibly attached to a project. Key attributes: id, projectId, ownerUserId, code, createdAt.
- **AudioFile (metadata)**: records uploaded audio metadata: id, projectId or snippetId, filename, mime, size, originTool (TidalCycles | Strudel | unknown), createdAt.
- **Event**: upcoming live coding event: id, title, description, startsAt, endsAt, location, organizer, createdAt.

---

## Review & Acceptance Checklist
*GATE: Automated checks run during main() execution*

### Content Quality
- [ ] No implementation details (languages, frameworks, APIs)
- [ ] Focused on user value and business needs
- [ ] Written for non-technical stakeholders
- [ ] All mandatory sections completed

### Requirement Completeness
- [ ] No [NEEDS CLARIFICATION] markers remain
- [ ] Requirements are testable and unambiguous  
- [ ] Success criteria are measurable
- [ ] Scope is clearly bounded
- [ ] Dependencies and assumptions identified

---

## Execution Status
*Updated by main() during processing*

- [x] User description parsed
- [x] Key concepts extracted
- [x] Ambiguities marked
- [x] User scenarios defined
- [x] Requirements generated
- [x] Entities identified
- [ ] Review checklist passed

```
